!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("react"),require("react-leaflet")):"function"==typeof define&&define.amd?define(["react","react-leaflet"],e):"object"==typeof exports?exports.ReactLeaflet=e(require("react"),require("react-leaflet")):t.ReactLeaflet=e(t.React,t[void 0])}(this,function(t,e){return function(t){function e(r){if(o[r])return o[r].exports;var i=o[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var o={};return e.m=t,e.c=o,e.p="",e(0)}([function(t,e,o){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.BingLayer=void 0;var i=o(1),n=r(i);e.BingLayer=n.default},function(t,e,o){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){var o={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(o[r]=t[r]);return o}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var o=0;o<e.length;o++){var r=e[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,o,r){return o&&t(e.prototype,o),r&&t(e,r),e}}(),l=function t(e,o,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,o);if(void 0===i){var n=Object.getPrototypeOf(e);return null===n?void 0:t(n,o,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},p=o(3),c=(r(p),o(4)),d=(o(2),function(t){function e(){return n(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return u(e,t),s(e,[{key:"componentWillMount",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"componentWillMount",this).call(this);var t=this.props,o=(t.map,t.layerContainer,t.bingkey),r=i(t,["map","layerContainer","bingkey"]);this.leafletElement=L.bingLayer(o,r)}}]),e}(c.TileLayer));d.propTypes={bingkey:p.PropTypes.string.isRequired},e.default=d},function(t,e){"use strict";L.BingLayer=L.TileLayer.extend({options:{subdomains:[0,1,2,3],type:"Aerial",attribution:"Bing",culture:""},initialize:function(t,e){L.Util.setOptions(this,e),this._bing_key=t,this._url=null,this._providers=[],this.metaRequested=!1},tile2quad:function(t,e,o){for(var r="",i=o;i>0;i--){var n=0,a=1<<i-1;0!==(t&a)&&(n+=1),0!==(e&a)&&(n+=2),r+=n}return r},getTileUrl:function(t){var e=this._getZoomForUrl(),o=this.options.subdomains,r=this.options.subdomains[Math.abs((t.x+t.y)%o.length)];return this._url.replace("{subdomain}",r).replace("{quadkey}",this.tile2quad(t.x,t.y,e)).replace("{culture}",this.options.culture)},loadMetadata:function(){if(!this.metaRequested){this.metaRequested=!0;var t=this,e="_bing_metadata_"+L.Util.stamp(this);window[e]=function(o){window[e]=void 0;var r=document.getElementById(e);return r.parentNode.removeChild(r),o.errorDetails?void console.log(o.errorDetails):void t.initMetadata(o)};var o="file:"===document.location.protocol?"http":document.location.protocol.slice(0,-1),r=o+"://dev.virtualearth.net/REST/v1/Imagery/Metadata/"+this.options.type+"?include=ImageryProviders&jsonp="+e+"&key="+this._bing_key+"&UriScheme="+o,i=document.createElement("script");i.type="text/javascript",i.src=r,i.id=e,document.getElementsByTagName("head")[0].appendChild(i)}},initMetadata:function(t){var e=t.resourceSets[0].resources[0];if(this.options.subdomains=e.imageUrlSubdomains,this._url=e.imageUrl,e.imageryProviders)for(var o=0;o<e.imageryProviders.length;o++)for(var r=e.imageryProviders[o],i=0;i<r.coverageAreas.length;i++){var n=r.coverageAreas[i],a={zoomMin:n.zoomMin,zoomMax:n.zoomMax,active:!1},u=new L.LatLngBounds(new L.LatLng(n.bbox[0]+.01,n.bbox[1]+.01),new L.LatLng(n.bbox[2]-.01,n.bbox[3]-.01));a.bounds=u,a.attrib=r.attribution,this._providers.push(a)}this._update()},_update:function(){null!==this._url&&this._map&&(this._update_attribution(),L.TileLayer.prototype._update.apply(this,[]))},_update_attribution:function(){for(var t=this._map.getBounds(),e=this._map.getZoom(),o=0;o<this._providers.length;o++){var r=this._providers[o];e<=r.zoomMax&&e>=r.zoomMin&&t.intersects(r.bounds)?(!r.active&&this._map.attributionControl&&this._map.attributionControl.addAttribution(r.attrib),r.active=!0):(r.active&&this._map.attributionControl&&this._map.attributionControl.removeAttribution(r.attrib),r.active=!1)}},onAdd:function(t){this.loadMetadata(),L.TileLayer.prototype.onAdd.apply(this,[t])},onRemove:function(t){for(var e=0;e<this._providers.length;e++){var o=this._providers[e];o.active&&this._map.attributionControl&&(this._map.attributionControl.removeAttribution(o.attrib),o.active=!1)}L.TileLayer.prototype.onRemove.apply(this,[t])}}),L.bingLayer=function(t,e){return new L.BingLayer(t,e)}},function(e,o){e.exports=t},function(t,o){t.exports=e}])});