!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("react"),require("react-leaflet")):"function"==typeof define&&define.amd?define(["react","react-leaflet"],e):"object"==typeof exports?exports.ReactLeaflet=e(require("react"),require("react-leaflet")):t.ReactLeaflet=e(t.React,t[void 0])}(this,function(t,e){return function(t){function e(o){if(r[o])return r[o].exports;var i=r[o]={exports:{},id:o,loaded:!1};return t[o].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var r={};return e.m=t,e.c=r,e.p="",e(0)}([function(t,e,r){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e.BingLayer=void 0;var i=r(1),n=o(i);e.BingLayer=n["default"]},function(t,e,r){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){var r={};for(var o in t)e.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(t,o)&&(r[o]=t[o]);return r}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,r,o){return r&&t(e.prototype,r),o&&t(e,o),e}}(),l=function f(t,e,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,e);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:f(i,e,r)}if("value"in o)return o.value;var n=o.get;if(void 0!==n)return n.call(r)},c=r(3),p=(o(c),r(4)),d=(r(2),function(t){function e(){return n(this,e),a(this,Object.getPrototypeOf(e).apply(this,arguments))}return u(e,t),s(e,[{key:"componentWillMount",value:function(){l(Object.getPrototypeOf(e.prototype),"componentWillMount",this).call(this);var t=this.props,r=(t.map,t.layerContainer,t.bingkey),o=i(t,["map","layerContainer","bingkey"]);this.leafletElement=L.bingLayer(r,o)}}]),e}(p.BaseTileLayer));d.propTypes={bingkey:c.PropTypes.string.isRequired},e["default"]=d},function(t,e){"use strict";L.BingLayer=L.TileLayer.extend({options:{subdomains:[0,1,2,3],type:"Aerial",attribution:"Bing",culture:""},initialize:function(t,e){L.Util.setOptions(this,e),this._bing_key=t,this._url=null,this._providers=[],this.metaRequested=!1},tile2quad:function(t,e,r){for(var o="",i=r;i>0;i--){var n=0,a=1<<i-1;0!==(t&a)&&(n+=1),0!==(e&a)&&(n+=2),o+=n}return o},getTileUrl:function(t){var e=this._getZoomForUrl(),r=this.options.subdomains,o=this.options.subdomains[Math.abs((t.x+t.y)%r.length)];return this._url.replace("{subdomain}",o).replace("{quadkey}",this.tile2quad(t.x,t.y,e)).replace("{culture}",this.options.culture)},loadMetadata:function(){if(!this.metaRequested){this.metaRequested=!0;var t=this,e="_bing_metadata_"+L.Util.stamp(this);window[e]=function(r){window[e]=void 0;var o=document.getElementById(e);return o.parentNode.removeChild(o),r.errorDetails?void console.log(r.errorDetails):void t.initMetadata(r)};var r="file:"===document.location.protocol?"http":document.location.protocol.slice(0,-1),o=r+"://dev.virtualearth.net/REST/v1/Imagery/Metadata/"+this.options.type+"?include=ImageryProviders&jsonp="+e+"&key="+this._bing_key+"&UriScheme="+r,i=document.createElement("script");i.type="text/javascript",i.src=o,i.id=e,document.getElementsByTagName("head")[0].appendChild(i)}},initMetadata:function(t){var e=t.resourceSets[0].resources[0];if(this.options.subdomains=e.imageUrlSubdomains,this._url=e.imageUrl,e.imageryProviders)for(var r=0;r<e.imageryProviders.length;r++)for(var o=e.imageryProviders[r],i=0;i<o.coverageAreas.length;i++){var n=o.coverageAreas[i],a={zoomMin:n.zoomMin,zoomMax:n.zoomMax,active:!1},u=new L.LatLngBounds(new L.LatLng(n.bbox[0]+.01,n.bbox[1]+.01),new L.LatLng(n.bbox[2]-.01,n.bbox[3]-.01));a.bounds=u,a.attrib=o.attribution,this._providers.push(a)}this._update()},_update:function(){null!==this._url&&this._map&&(this._update_attribution(),L.TileLayer.prototype._update.apply(this,[]))},_update_attribution:function(){for(var t=this._map.getBounds(),e=this._map.getZoom(),r=0;r<this._providers.length;r++){var o=this._providers[r];e<=o.zoomMax&&e>=o.zoomMin&&t.intersects(o.bounds)?(!o.active&&this._map.attributionControl&&this._map.attributionControl.addAttribution(o.attrib),o.active=!0):(o.active&&this._map.attributionControl&&this._map.attributionControl.removeAttribution(o.attrib),o.active=!1)}},onAdd:function(t){this.loadMetadata(),L.TileLayer.prototype.onAdd.apply(this,[t])},onRemove:function(t){for(var e=0;e<this._providers.length;e++){var r=this._providers[e];r.active&&this._map.attributionControl&&(this._map.attributionControl.removeAttribution(r.attrib),r.active=!1)}L.TileLayer.prototype.onRemove.apply(this,[t])}}),L.bingLayer=function(t,e){return new L.BingLayer(t,e)}},function(e,r){e.exports=t},function(t,r){t.exports=e}])});